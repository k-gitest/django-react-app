# django-react-app

Django/React ãƒ¢ãƒãƒ¬ãƒãƒ™ãƒ¼ã‚¹ã®SPAã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

## æ¦‚è¦

æ‹¡å¼µæ€§ã¨ä¿å®ˆæ€§ã‚’é‡è¦–ã—ãŸãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«Django REST Frameworkã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«React + TypeScriptã‚’æ¡ç”¨ã—ã€ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹æ˜ç¢ºãªè²¬å‹™åˆ†é›¢ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

## ä¸»ãªç‰¹å¾´

- ğŸ—ï¸ **ã‚¹ã‚±ãƒ¼ãƒ«å¯èƒ½ãªãƒ¢ãƒãƒ¬ãƒæ§‹æˆ**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ä¸€å…ƒç®¡ç†ã—ã€ãƒãƒ¼ãƒ å…¨ä½“ã§ã®ä»•æ§˜å¤‰æ›´ã¸ã®è¿…é€Ÿãªå¯¾å¿œã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚
- ğŸ¯ **ãƒãƒ¼ãƒ é–‹ç™ºã«é©ã—ãŸãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: è¤‡æ•°äººã§ã®ä¸¦è¡Œé–‹ç™ºã‚’æƒ³å®šã—ã€View/Service/Modelã®è²¬å‹™ã‚’åˆ†é›¢ã€‚ã‚³ãƒ¼ãƒ‰ã®è¡çªï¼ˆã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆï¼‰ã‚’æœ€å°é™ã«æŠ‘ãˆã€ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã•ã›ã¦ã„ã¾ã™ã€‚
- ğŸ” **JWTèªè¨¼**: dj-rest-auth + simplejwtã«ã‚ˆã‚‹å …ç‰¢ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- ğŸ³ **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç‹¬ç«‹é–‹ç™º (MSW)**: APIã®å®Ÿè£…ã‚’å¾…ãŸãšã«é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆãŒå¯èƒ½ãªMSWã‚’æ´»ç”¨ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¸ã®ä¾å­˜ã‚’æ¸›ã‚‰ã—ã€é–‹ç™ºã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’æœ€å¤§åŒ–ã—ã¾ã™ã€‚
- ğŸ§ª **ãƒ†ã‚¹ãƒˆå……å®Ÿ**: Playwright(E2E)ã€Vitest(Unit)ã€Django TestCase
- â˜ï¸ **ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®é«˜é€ŸåŒ–**: DockerãŠã‚ˆã³GitHub Codespacesã«å®Œå…¨å¯¾å¿œã€‚ç’°å¢ƒæ§‹ç¯‰ã®æ‰‹é–“ã‚’çœãã€æ–°ãƒ¡ãƒ³ãƒãƒ¼ãŒå³æ—¥ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã‚‹ç’°å¢ƒã‚’æä¾›ã—ã¾ã™ã€‚

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Django 4.2.7
- **API**: Django REST Framework 3.14.0
- **èªè¨¼**: dj-rest-auth 7.0.1, djangorestframework-simplejwt 5.5.1
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL 17 (psycopg2-binary 2.9.9)
- **ã‚µãƒ¼ãƒãƒ¼**: gunicorn 21.2.0
- **ãã®ä»–**: django-cors-headers, python-dotenv, python-decouple

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: React 19.2.0, TypeScript 5.9.3
- **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«**: Vite 7.2.4
- **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: React Router DOM 7.10.1
- **çŠ¶æ…‹ç®¡ç†**: Zustand 5.0.9, TanStack Query 5.90.12
- **ãƒ•ã‚©ãƒ¼ãƒ **: React Hook Form 7.68.0, Zod 4.1.13
- **UI**: Tailwind CSS 4.1.17, shadcn/ui
- **HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**: Ky 1.14.1
- **ãƒ†ã‚¹ãƒˆ**: Playwright 1.57.0, Vitest 4.0.15, MSW 2.12.4, playwright-msw 3.0.1
- **Linter**: ESLint 9.39.1

### ã‚¤ãƒ³ãƒ•ãƒ©ï¼ˆTerraformç®¡ç†ï¼‰
- **Neon**: PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Backblaze B2**: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆS3äº’æ›ï¼‰
- **Cloudflare Pages**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°
- **Render**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°
- **Terraform Cloud**: ã‚¤ãƒ³ãƒ•ãƒ©çŠ¶æ…‹ç®¡ç†

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```text
/
â”œâ”€â”€ backend/                    # Djangoãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ config/                # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â”‚   â”‚   â”œâ”€â”€ settings.py        # ç’°å¢ƒè¨­å®š
â”‚   â”‚   â”œâ”€â”€ urls.py            # ãƒ«ãƒ¼ãƒˆURLãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”‚   â”‚   â”œâ”€â”€ wsgi.py / asgi.py  # ã‚µãƒ¼ãƒãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ users/                 # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”œâ”€â”€ models.py          # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾©
â”‚   â”‚   â”œâ”€â”€ views.py           # APIãƒ“ãƒ¥ãƒ¼ï¼ˆè–„ã„ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ï¼‰
â”‚   â”‚   â”œâ”€â”€ service.py         # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
â”‚   â”‚   â”œâ”€â”€ utils.py           # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â”‚   â”œâ”€â”€ urls.py            # ã‚¢ãƒ—ãƒªå›ºæœ‰ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”‚   â”‚   â”œâ”€â”€ serializers.py     # DRFã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶
â”‚   â”‚   â”œâ”€â”€ tests/             # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â”œâ”€â”€ test_models.py
â”‚   â”‚   â”‚   â””â”€â”€ test_services.py
â”‚   â”‚   â”œâ”€â”€ management/        # ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰
â”‚   â”‚   â”‚   â””â”€â”€ commands/
â”‚   â”‚   â”‚       â””â”€â”€ seed_db.py
â”‚   â”‚   â””â”€â”€ migrations/        # DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚
â”‚   â”œâ”€â”€ manage.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ .gitignore
â”‚
â”œâ”€â”€ frontend/                   # Reactãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ features/          # æ©Ÿèƒ½å˜ä½ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆä»Šå¾Œè¿½åŠ ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ auth/         # èªè¨¼æ©Ÿèƒ½
â”‚   â”‚   â”‚       â”œâ”€â”€ components/
â”‚   â”‚   â”‚       â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚       â”œâ”€â”€ services/
â”‚   â”‚   â”‚       â””â”€â”€ types/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/        # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ form/          # ãƒ•ã‚©ãƒ¼ãƒ é–¢é€£
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/        # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆheader/footerç­‰ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ ui/            # shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pages/             # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ Home/
â”‚   â”‚   â”‚   â”œâ”€â”€ Auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ routes/            # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š
â”‚   â”‚   â”‚   â”œâ”€â”€ router.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ auth-guard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ guest-guard.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ hooks/             # å…±é€šã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ lib/               # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ api-client.ts  # Kyãƒ™ãƒ¼ã‚¹ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ auth-client.ts
â”‚   â”‚   â”‚   â””â”€â”€ queryClient.ts
â”‚   â”‚   â”œâ”€â”€ schemas/           # Zodã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”‚   â”œâ”€â”€ types/             # TypeScriptå‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ errors/            # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ tests/                 # ãƒ†ã‚¹ãƒˆæ§‹æˆ
â”‚   â”‚   â”œâ”€â”€ e2e/               # E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightå°‚ç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ unit/              # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆVitestï¼‰
â”‚   â”‚   â”œâ”€â”€ integration/       # çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆVitestï¼‰
â”‚   â”‚   â”œâ”€â”€ setup/             # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ mocks/             # MSWè¨­å®š
â”‚   â”‚   â””â”€â”€ test-utils/        # ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚
â”‚   â”œâ”€â”€ playwright.config.ts   # Playwrightè¨­å®š
â”‚   â”œâ”€â”€ vitest.config.ts       # Vitestè¨­å®š
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ .gitignore
â”‚
â”œâ”€â”€ .devcontainer/             # Dev Containerè¨­å®š
â”‚   â”œâ”€â”€ devcontainer.json      # Codespaces/ãƒ­ãƒ¼ã‚«ãƒ«æ‰‹å‹•èµ·å‹•å‹
â”‚   â””â”€â”€ devcontainer-compose.json  # ãƒ­ãƒ¼ã‚«ãƒ«Composeçµ±åˆå‹ï¼ˆè‡ªå‹•èµ·å‹•ï¼‰
â”‚
â”œâ”€â”€ terraform/                 # terraformè¨­å®š
â”‚   â”œâ”€â”€ modules/               # å…±é€šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆéƒ¨å“ï¼‰
â”‚   â”‚   â”œâ”€â”€ cloudflare/
â”‚   â”‚   â”‚   â”œâ”€â”€ main.tf        # ãƒªã‚½ãƒ¼ã‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ outputs.tf
â”‚   â”‚   â”‚   â””â”€â”€ variables.tf
â”‚   â”‚   â”œâ”€â”€ neon/
â”‚   â”‚   â”œâ”€â”€ render/
â”‚   â”‚   â””â”€â”€ blackblaze/
â”‚   â””â”€â”€ envs/                  # ç’°å¢ƒã”ã¨ã®å®šç¾©
â”‚       â”œâ”€â”€ production/              # æœ¬ç•ªç’°å¢ƒ
â”‚       â”‚   â”œâ”€â”€ main.tf        # å„moduleã‚’å‘¼ã³å‡ºã—ã€æœ¬ç•ªç”¨å¤‰æ•°ã‚’æ¸¡ã™
â”‚       â”‚   â”œâ”€â”€ outputs.tf
â”‚       â”‚   â””â”€â”€ variables.tf
â”‚       â””â”€â”€ staging/           # ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ
â”‚
â”œâ”€â”€ docker-compose.yml         # Dockeræ§‹æˆ
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json               # ãƒ«ãƒ¼ãƒˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¨­å®š
â””â”€â”€ README.md
```

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Docker & Docker Compose
- Node.js 18+ (ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã®å ´åˆ)
- Python 3.11+ (ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã®å ´åˆ)
- Visual Studio Code + Dev Containersæ‹¡å¼µæ©Ÿèƒ½ (devcontainerä½¿ç”¨ã®å ´åˆ)

### é–‹ç™ºç’°å¢ƒã®é¸æŠè‚¢

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä»¥ä¸‹ã®é–‹ç™ºç’°å¢ƒã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ï¼š

1. **GitHub Codespaces**: ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã®é–‹ç™ºç’°å¢ƒ
2. **Dev Containerï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰**: VS Codeã§ã®è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
3. **Docker Compose**: ã‚³ãƒ³ãƒ†ãƒŠãƒ™ãƒ¼ã‚¹ã®é–‹ç™ºç’°å¢ƒ
4. **ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ**: ç›´æ¥ãƒã‚·ãƒ³ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

---

### æ–¹æ³•1: GitHub Codespaces ã‚’ä½¿ç”¨

ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã§å³åº§ã«é–‹ç™ºç’°å¢ƒãŒæ§‹ç¯‰ã•ã‚Œã¾ã™ã€‚

```bash
# 1. GitHubãƒªãƒã‚¸ãƒˆãƒªãƒšãƒ¼ã‚¸ã‹ã‚‰
#    "Code" â†’ "Codespaces" â†’ "Create codespace on main"

# 2. Codespaceèµ·å‹•å¾Œã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
docker compose up -d

# 3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
cd frontend
npm install
npm run dev

# 4. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
docker compose exec backend python manage.py migrate

# 5. ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ
docker compose exec backend python manage.py createsuperuser
```

**ä½¿ç”¨è¨­å®š**: `.devcontainer/devcontainer.json`

**ã‚¢ã‚¯ã‚»ã‚¹**:
- CodespacesãŒè‡ªå‹•ã§ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¨­å®š
- "PORTS"ã‚¿ãƒ–ã‹ã‚‰å„ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹

---

### æ–¹æ³•2: Dev Containerï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰ã‚’ä½¿ç”¨

ãƒ­ãƒ¼ã‚«ãƒ«ã®VS Codeã§é–‹ç™ºç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹æ–¹æ³•ã§ã™ã€‚

#### ãƒ‘ã‚¿ãƒ¼ãƒ³A: Composeçµ±åˆå‹ï¼ˆè‡ªå‹•èµ·å‹•ï¼‰

`.devcontainer/devcontainer-compose.json`ã‚’ä½¿ç”¨

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd django-react-app

# 2. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ‡ã‚Šæ›¿ãˆï¼ˆåˆå›ã®ã¿ï¼‰
mv .devcontainer/devcontainer.json .devcontainer/devcontainer.manual.json
mv .devcontainer/devcontainer-compose.json .devcontainer/devcontainer.json

# 3. VS Codeã§é–‹ã
code .

# 4. ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆï¼ˆCtrl+Shift+P / Cmd+Shift+Pï¼‰ã‹ã‚‰
#    "Dev Containers: Reopen in Container" ã‚’é¸æŠ
```

åˆå›èµ·å‹•å¾Œã€ä»¥ä¸‹ãŒ**è‡ªå‹•å®Ÿè¡Œ**ã•ã‚Œã¾ã™ï¼š
- Docker Composeã«ã‚ˆã‚‹å…¨ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
- ãƒ«ãƒ¼ãƒˆãƒ»ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆDjangoï¼‰
- ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¨­å®šï¼ˆ8000, 3000ï¼‰

**æ³¨æ„**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆ`npm run dev`ï¼‰ã¯ã€postCreateCommandã§ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰èµ·å‹•ã—ã¦ã‚‚devcontaineræ§‹ç¯‰å®Œäº†å¾Œã«çµ‚äº†ã™ã‚‹ãŸã‚ã€æ‰‹å‹•èµ·å‹•ãŒå¿…è¦ã§ã™ã€‚

```bash
# devcontainerèµ·å‹•å¾Œã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
cd frontend
npm run dev
```

**ã‚¢ã‚¯ã‚»ã‚¹**:
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: http://localhost:3000
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API: http://localhost:8000/api/v1/
- Django Admin: http://localhost:8000/admin/

#### ãƒ‘ã‚¿ãƒ¼ãƒ³B: æ‰‹å‹•èµ·å‹•å‹

`.devcontainer/devcontainer.json`ã‚’ä½¿ç”¨ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šï¼‰

```bash
# 1-3. ãƒ‘ã‚¿ãƒ¼ãƒ³Aã¨åŒã˜ï¼ˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«åˆ‡ã‚Šæ›¿ãˆã¯ä¸è¦ï¼‰

# 4. devcontainerèµ·å‹•å¾Œã€æ‰‹å‹•ã§Composeèµ·å‹•
docker compose up -d

# 5. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
cd frontend
npm install
npm run dev
```

ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€Composeã®èµ·å‹•/åœæ­¢ã‚’æŸ”è»Ÿã«åˆ¶å¾¡ã—ãŸã„å ´åˆã«é©ã—ã¦ã„ã¾ã™ã€‚

**è£œè¶³**: ã©ã¡ã‚‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚‚ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã¯æ‰‹å‹•å®Ÿè¡ŒãŒå¿…è¦ã§ã™ã€‚
```bash
docker compose exec backend python manage.py migrate
docker compose exec backend python manage.py createsuperuser
```

---

### æ–¹æ³•3: Docker Compose ã‚’ä½¿ç”¨

devcontainerã‚’ä½¿ã‚ãšã€ç›´æ¥Docker Composeã§é–‹ç™ºã™ã‚‹å ´åˆã€‚

1. **ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³**
   ```bash
   git clone <repository-url>
   cd django-react-app
   ```

2. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**
   ```bash
   # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
   cp backend/.env.example backend/.env
   # å¿…è¦ãªç’°å¢ƒå¤‰æ•°ã‚’ç·¨é›†
   
   # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
   cp frontend/.env.example frontend/.env
   # å¿…è¦ãªç’°å¢ƒå¤‰æ•°ã‚’ç·¨é›†
   ```

3. **ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•**
   ```bash
   docker compose up -d
   ```

4. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**
   ```bash
   docker compose exec backend python manage.py migrate
   ```

5. **ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ**
   ```bash
   docker compose exec backend python manage.py createsuperuser
   ```

6. **ã‚¢ã‚¯ã‚»ã‚¹**
   - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: http://localhost:3000
   - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API: http://localhost:8000/api/v1/
   - Django Admin: http://localhost:8000/admin/

---

### æ–¹æ³•4: ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒï¼ˆDocker ãªã—ï¼‰

<details>
<summary>è©³ç´°ã‚’è¡¨ç¤º</summary>

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
python manage.py migrate
python manage.py runserver
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```bash
cd frontend
npm install
npm run dev
```

</details>

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### è¨­è¨ˆå“²å­¦

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯**å€‹äººé–‹ç™ºã§ã‚ã‚ŠãªãŒã‚‰å°†æ¥çš„ãªãƒãƒ¼ãƒ é–‹ç™ºã‚’è¦–é‡ã«å…¥ã‚ŒãŸæ§‹æˆ**ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚è²¬å‹™ã®åˆ†é›¢ï¼ˆSeparation of Concernsï¼‰ã‚’å¾¹åº•ã—ã€é•·æœŸçš„ãªä¿å®ˆæ€§ã‚’å„ªå…ˆã—ã¾ã™ã€‚

**ãƒãƒ¼ãƒ é–‹ç™ºã‚’æ”¯ãˆã‚‹ã€Œã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆï¼ˆå¥‘ç´„ï¼‰å„ªå…ˆã€é–‹ç™º**: æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å¢ƒç•Œã‚’æ˜ç¢ºã«ã™ã‚‹ãŸã‚ã«MSWã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€APIä»•æ§˜ã‚’ã€Œå¥‘ç´„ã€ã¨ã—ã¦å…ˆã«å®šç¾©ã—ã€ä¸¡ãƒãƒ¼ãƒ ãŒä¸¦è¡Œã—ã¦å®Ÿè£…ã‚’é€²ã‚ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å¯èƒ½ã«ã—ã¦ã„ã¾ã™ã€‚

### ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ç¾åœ¨æ¡ç”¨ã—ã¦ã„ã‚‹**ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**ã¯ã€Djangoã¨Reactã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã‚’æœ€å¤§é™æ´»ç”¨ã—ãªãŒã‚‰ã€ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚’é©åˆ‡ã«åˆ†é›¢ã—ãŸå®Ÿç”¨çš„ãªè¨­è¨ˆã§ã™ã€‚

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆDjangoï¼‰

```
Request â†’ View â†’ Serializer â†’ Service â†’ Model â†’ Database
                     â†“           â†“
                 Validation  Business Logic
```

**å„å±¤ã®è²¬å‹™**:

| å±¤ | ãƒ•ã‚¡ã‚¤ãƒ« | è²¬å‹™ |
|---|---|---|
| **View** | `views.py` | HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®è–„ã„å±¤<br>ãƒ»ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å—ä»˜ã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´ã®ã¿ |
| **Serializer** | `serializers.py` | ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼ã¨ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º<br>ãƒ»ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³<br>ãƒ»ãƒ¢ãƒ‡ãƒ«ã¨JSONã®ç›¸äº’å¤‰æ› |
| **Service** | `service.py` | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ä¸­æ ¸<br>ãƒ»è¤‡æ•°ãƒ¢ãƒ‡ãƒ«ã‚’è·¨ãå‡¦ç†<br>ãƒ»å¤–éƒ¨APIé€£æº<br>ãƒ»ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç† |
| **Model** | `models.py` | ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒã¨æ°¸ç¶šåŒ–<br>ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒå®šç¾© |

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆReactï¼‰

```
User Interaction
    â†“
Page/Component (ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤)
    â†“
Custom Hook (ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ»çŠ¶æ…‹ç®¡ç†ã®æŠ½è±¡åŒ–)
    â†“
Service (APIå‘¼ã³å‡ºã—ãƒ­ã‚¸ãƒƒã‚¯)
    â†“
Backend API

[æ¨ªæ–­çš„é–¢å¿ƒäº‹]
- TanStack Query: ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†
- Zustand: ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ï¼ˆèªè¨¼æƒ…å ±ç­‰ï¼‰
```

**Feature-Drivenæ§‹é€ **ï¼ˆä»Šå¾Œã®æ‹¡å¼µæ–¹é‡ï¼‰:

ä»Šå¾Œã®æ©Ÿèƒ½è¿½åŠ ã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰å˜ä½ã§`features/`é…ä¸‹ã«å®Ÿè£…ã—ã¾ã™ï¼š

```
src/features/
â”œâ”€â”€ auth/          # èªè¨¼æ©Ÿèƒ½ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
â”œâ”€â”€ users/         # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
â”œâ”€â”€ products/      # å•†å“ç®¡ç†
â””â”€â”€ orders/        # æ³¨æ–‡ç®¡ç†
    â”œâ”€â”€ components/
    â”œâ”€â”€ hooks/
    â”œâ”€â”€ services/
    â””â”€â”€ types/
```

### è¨­è¨ˆã®ä½ç½®ã¥ã‘

| é …ç›® | è©•ä¾¡ |
|---|---|
| **å°å…¥ã‚³ã‚¹ãƒˆ** | âœ… ä½ã„ï¼šãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®æ¨™æº–æ§‹æˆã«è‡ªç„¶ã«çµ±åˆ |
| **ä¿å®ˆæ€§** | âœ… é«˜ã„ï¼šãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãŒServiceå±¤ã«é›†ç´„ |
| **ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§** | âœ… é«˜ã„ï¼šå„å±¤ã‚’ç‹¬ç«‹ã—ã¦ãƒ†ã‚¹ãƒˆå¯èƒ½ |
| **é©åˆ‡ãªæŠ½è±¡åŒ–** | âœ… å®Ÿç”¨æ€§ã¨ã®ãƒãƒ©ãƒ³ã‚¹ã‚’é‡è¦– |
| **ç™ºå±•æ€§** | âœ… å°†æ¥çš„ã«ã‚ˆã‚Šå³å¯†ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¸ã®ç§»è¡Œã‚‚å¯èƒ½ |


---

## èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 

### æ¦‚è¦

**dj-rest-auth + djangorestframework-simplejwt**ã«ã‚ˆã‚‹JWT Cookieèªè¨¼ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

### è¨­è¨ˆå¤‰æ›´ã®çµŒç·¯ï¼šdjoserã‹ã‚‰dj-rest-authã¸ã®ç§»è¡Œ

å½“åˆã¯djoserã«ã‚ˆã‚‹ãƒ˜ãƒƒãƒ€ãƒ¼èªè¨¼ï¼ˆBearerï¼‰ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã—ãŸãŒã€ä»¥ä¸‹ã®ç†ç”±ã‹ã‚‰dj-rest-authã®Cookieèªè¨¼æ–¹å¼ã«ç§»è¡Œã—ã¾ã—ãŸã€‚

#### ç§»è¡Œã®ç†ç”±

**1. XSSæ”»æ’ƒã¸ã®å¯¾ç­–ã‚’æœ€å„ªå…ˆ**

æ—§æ–¹å¼ï¼ˆdjoserï¼‰ã§ã¯ã€Access Tokenã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®localStorageã‚„sessionStorageã«ä¿å­˜ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚ã“ã®æ–¹æ³•ã¯ã€XSSï¼ˆCross-Site Scriptingï¼‰æ”»æ’ƒã«ã‚ˆã£ã¦ãƒˆãƒ¼ã‚¯ãƒ³ãŒæ¼æ´©ã™ã‚‹ãƒªã‚¹ã‚¯ãŒéå¸¸ã«é«˜ã„ã¨åˆ¤æ–­ã—ã¾ã—ãŸã€‚

dj-rest-authã®HttpOnly Cookieæ–¹å¼ã§ã¯ã€JavaScriptã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’å®Œå…¨ã«é®æ–­ã§ãã‚‹ãŸã‚ã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

**2. è‡ªä½œå®Ÿè£…ã®ãƒªã‚¹ã‚¯å›é¿**

HttpOnly Cookieèªè¨¼ã‚’è‡ªä½œã§å®Ÿè£…ã™ã‚‹ã“ã¨ã‚‚æ¤œè¨ã—ã¾ã—ãŸãŒã€ä»¥ä¸‹ã®æ‡¸å¿µã‹ã‚‰è¦‹é€ã‚Šã¾ã—ãŸï¼š

- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯**: èªè¨¼ã¨ã„ã†æ¥µã‚ã¦é‡è¦ãªæ©Ÿèƒ½ã§ã®å®Ÿè£…ãƒŸã‚¹ã¯è‡´å‘½çš„
- **ä¿å®ˆã‚³ã‚¹ãƒˆ**: ã‚³ãƒ¼ãƒ‰é‡ã®å¢—åŠ ã¨ã€å°†æ¥çš„ãªãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è² æ‹…
- **é–‹ç™ºæ™‚é–“**: å®Ÿç¸¾ã®ã‚ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ãˆã°ã€åŒç­‰ã®æ™‚é–“ã§å …ç‰¢ãªå®Ÿè£…ãŒå¯èƒ½

**3. SPAèªè¨¼ã«ç‰¹åŒ–ã—ãŸè¨­è¨ˆæ€æƒ³**

Djangoã®æ¨™æº–çš„ãªã‚»ãƒƒã‚·ãƒ§ãƒ³èªè¨¼ã¯ã€ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ï¼ˆSPAï¼‰ç’°å¢ƒã§ã®èªè¨¼ãƒ•ãƒ­ãƒ¼ã«é©ã—ã¦ã„ã¾ã›ã‚“ã€‚dj-rest-authã¯ã€SPAç”¨ã«æœ€é©åŒ–ã•ã‚ŒãŸè¨­è¨ˆæ€æƒ³ã‚’æŒã¤ãŸã‚ã€æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦ä»¶ã«æœ€é©ã¨åˆ¤æ–­ã—ã¾ã—ãŸã€‚

---

### èªè¨¼æ–¹å¼ã®æ¯”è¼ƒ

| é …ç›® | æ—§è¨­è¨ˆï¼ˆdjoserï¼‰ | æ–°è¨­è¨ˆï¼ˆdj-rest-authï¼‰ |
|---|---|---|
| **æ–¹å¼** | JWTï¼ˆBearerèªè¨¼ï¼‰ | JWTï¼ˆCookieèªè¨¼ï¼‰ |
| **ãƒˆãƒ¼ã‚¯ãƒ³æ ¼ç´å…ˆ** | localStorage / sessionStorage | HttpOnly Cookie |
| **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ‡¸å¿µ** | XSSæ”»æ’ƒ | CSRFæ”»æ’ƒï¼ˆDjangoãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§å¯¾å¿œï¼‰ |
| **è¨­è¨ˆåˆ¤æ–­ã®ç†ç”±** | APIã®åˆ©ä¾¿æ€§ | Web SPAã«ãŠã‘ã‚‹XSSãƒªã‚¹ã‚¯å›é¿ã‚’æœ€å„ªå…ˆ |
| **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®è²¬å‹™** | ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ãŒå¿…è¦ | ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ä¸è¦ï¼ˆã‚µãƒ¼ãƒãƒ¼å´ã«å§”è­²ï¼‰ |

---

### ã‚«ã‚¹ã‚¿ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«

`AbstractUser`ã¨`BaseUserManager`ã‚’ç¶™æ‰¿ã—ã€**emailãƒ™ãƒ¼ã‚¹ã®èªè¨¼**ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

**è¨­è¨ˆåˆ¤æ–­ã®ç†ç”±**:

| è¦ä»¶ | æ¡ç”¨ã—ãŸæ‰‹æ³• |
|---|---|
| Djangoæ¨™æº–ã®èªè¨¼æ©Ÿèƒ½ã‚’æ´»ç”¨ | `AbstractUser`ã‚’ç¶™æ‰¿ |
| username â†’ email ã«å¤‰æ›´ | `username = None`ã§ç„¡åŠ¹åŒ– |
| ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å¤§æ–‡å­—å°æ–‡å­—å•é¡Œ | `get_by_natural_key()`ã§`__iexact`æ¤œç´¢ |
| createsuperuserå¯¾å¿œ | `BaseUserManager`ã‚’ç¶™æ‰¿ã—ã¦ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ |

### Simple JWTè¨­å®š

```python
SIMPLE_JWT = {
    # ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã¯çŸ­å‘½ã«è¨­å®š
    "ACCESS_TOKEN_LIFETIME": timedelta(minutes=5),
    
    # ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã¯1æ—¥é–“æœ‰åŠ¹
    "REFRESH_TOKEN_LIFETIME": timedelta(days=1),
    
    # ãƒˆãƒ¼ã‚¯ãƒ³ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³: refreshä½¿ç”¨æ™‚ã«æ–°ã—ã„refreshã‚’ç™ºè¡Œ
    "ROTATE_REFRESH_TOKENS": True,
    
    # ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å¾Œã€å¤ã„refreshãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆã«è¿½åŠ 
    "BLACKLIST_AFTER_ROTATION": True,
    
    # æ¨™æº–ã®Bearerèªè¨¼ã‚¹ã‚­ãƒ¼ãƒ ã‚’ä½¿ç”¨ï¼ˆRFC 6750æº–æ‹ ï¼‰
    "AUTH_HEADER_TYPES": ("Bearer",),
}
```

**é‡è¦ãªè¨­å®š**:

| è¨­å®š | å€¤ | ç†ç”± |
|---|---|---|
| `ACCESS_TOKEN_LIFETIME` | 5åˆ† | çŸ­å‘½ã«ã—ã¦ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã‚’ä½æ¸› |
| `REFRESH_TOKEN_LIFETIME` | 1æ—¥ | ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãƒãƒ©ãƒ³ã‚¹ |
| `ROTATE_REFRESH_TOKENS` | True | refreshä½¿ç”¨æ™‚ã«æ–°ã—ã„refreshã‚’ç™ºè¡Œ |
| `BLACKLIST_AFTER_ROTATION` | True | å¤ã„refreshã‚’ç„¡åŠ¹åŒ–ï¼ˆãƒªãƒ—ãƒ¬ã‚¤æ”»æ’ƒå¯¾ç­–ï¼‰ |
| `AUTH_HEADER_TYPES` | Bearer | æ¥­ç•Œæ¨™æº–ï¼ˆRFC 6750ï¼‰ã«æº–æ‹  |

### dj-rest-auth Cookieè¨­å®š

```python
REST_AUTH = {
    'USE_JWT': True,
    'SESSION_LOGIN': False,
    
    # Cookieè¨­å®š
    'JWT_AUTH_COOKIE': 'access-token',
    'JWT_AUTH_REFRESH_COOKIE': 'refresh-token',
    'JWT_AUTH_HTTPONLY': True,  # XSSå¯¾ç­–ã®è¦
    'JWT_AUTH_SAMESITE': 'None',
    'JWT_AUTH_SECURE': True,
    # 'JWT_AUTH_SAMESITE': 'Lax',  # é–‹ç™ºç’°å¢ƒãŒhttpã®å ´åˆ
    # 'JWT_AUTH_SECURE': False,    # é–‹ç™ºç’°å¢ƒãŒhttpã®å ´åˆ
}
```

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®è©³ç´°**:

| è¨­å®š | å€¤ | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ„ç¾© |
|---|---|---|
| `JWT_AUTH_HTTPONLY` | True | **JavaScriptã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’å®Œå…¨é®æ–­**ï¼ˆXSSå¯¾ç­–ã®æ ¸å¿ƒï¼‰ |
| `JWT_AUTH_SECURE` | Trueï¼ˆæœ¬ç•ªï¼‰ | HTTPSæ¥ç¶šã§ã®ã¿Cookieé€ä¿¡ã‚’è¨±å¯ |
| `SESSION_LOGIN` | False | JWTèªè¨¼ã«ä¸€å…ƒåŒ–ã—ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ä¸€è²«æ€§ã‚’ç¢ºä¿ |

---

### CSRFå¯¾ç­–

Cookieèªè¨¼ã§ã¯ã€CSRFï¼ˆCross-Site Request Forgeryï¼‰æ”»æ’ƒã¸ã®å¯¾ç­–ãŒå¿…é ˆã§ã™ã€‚

```python
CSRF_COOKIE_HTTPONLY = False  # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒCSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’èª­ã¿å–ã‚Šå¯èƒ½ã«
CSRF_COOKIE_SAMESITE = 'None'  # ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®åˆ¶å¾¡
CSRF_COOKIE_SECURE = True     # é–‹ç™ºç’°å¢ƒãŒhttpã®å ´åˆã¯False
CORS_ALLOW_CREDENTIALS = True  # Cookieé€ä¿¡ã‚’è¨±å¯
```

**é‡è¦**: `CSRF_COOKIE_HTTPONLY = False`ã®ç†ç”±ã¯ã€Reactï¼ˆSPAï¼‰ãŒCSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’èª­ã¿å–ã‚Šã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ã«å«ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚ã“ã‚Œã¯SPAã¨Cookieèªè¨¼ã‚’çµ„ã¿åˆã‚ã›ã‚‹éš›ã®æ¨™æº–çš„ãªè¨­å®šã§ã™ã€‚

### èªè¨¼ãƒ•ãƒ­ãƒ¼
```
1. ç™»éŒ²     â†’ POST /api/v1/auth/registration/
              â†“ HttpOnly Cookieã§access-token, refresh-tokenç™ºè¡Œ
              
2. ãƒ­ã‚°ã‚¤ãƒ³  â†’ POST /api/v1/auth/login/
              â†“ HttpOnly Cookieã§access-token, refresh-tokenç™ºè¡Œ
              
3. APIå‘¼ã³å‡ºã— â†’ Cookieè‡ªå‹•é€ä¿¡ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã®ãƒˆãƒ¼ã‚¯ãƒ³æ“ä½œä¸è¦ï¼‰

4. ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–° â†’ POST /api/v1/auth/token/refresh/
                 â†“ refresh-token CookieãŒè‡ªå‹•é€ä¿¡ã•ã‚Œã‚‹
                 â†“ æ–°ã—ã„access-tokenã¨refresh-tokenã‚’ç™ºè¡Œ
                 
5. ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ  â†’ POST /api/v1/auth/logout/
                â†“ refresh-tokenã‚’ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆåŒ–
                â†“ Cookieã‚’å‰Šé™¤
```

#### ğŸ”§ æ–°è¦ç™»éŒ²ãƒ—ãƒ­ã‚»ã‚¹ã®æœ€é©åŒ–ï¼ˆCustomRegisterViewï¼‰
dj-rest-authã®æ¨™æº–RegisterViewã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆå¾Œã«è‡ªå‹•ã§JWT Cookieã‚’ç™ºè¡Œã—ã¾ã›ã‚“ã€‚æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯CustomRegisterViewã‚’å®Ÿè£…ã—ã€ç™»éŒ²æˆåŠŸæ™‚ã«å³åº§ã«access-tokenã‚’ç™ºè¡Œãƒ»Cookieã¸ã‚»ãƒƒãƒˆã™ã‚‹ã‚ˆã†ã«æ‹¡å¼µã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç™»éŒ²å¾Œã«ãƒ­ã‚°ã‚¤ãƒ³æ“ä½œã‚’ã™ã‚‹ã“ã¨ãªãã€ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸é·ç§»å¯èƒ½ã§ã™ã€‚

### APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| æ©Ÿèƒ½ | Method | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ |
|---|---|---|---|
| **æ–°è¦ç™»éŒ²** | POST | `/api/v1/auth/registration/` | ä¸è¦ |
| **ãƒ­ã‚°ã‚¤ãƒ³** | POST | `/api/v1/auth/login/` | ä¸è¦ |
| **ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ** | POST | `/api/v1/auth/logout/` | Cookieè‡ªå‹•é€ä¿¡ |
| **ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—** | GET | `/api/v1/auth/user/` | Cookieè‡ªå‹•é€ä¿¡ |
| **ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±æ›´æ–°** | PUT/PATCH | `/api/v1/auth/user/` | Cookieè‡ªå‹•é€ä¿¡ |
| **ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥** | POST | `/api/v1/auth/token/refresh/` | refresh-token Cookie |
| **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´** | POST | `/api/v1/auth/password/change/` | Cookieè‡ªå‹•é€ä¿¡ |

### âš ï¸ é‡è¦ãªæ³¨æ„ç‚¹

1. **ãƒˆãƒ¼ã‚¯ãƒ³ã¯HttpOnly Cookieã§ç®¡ç†**
   - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ï¼ˆJavaScriptï¼‰ã‹ã‚‰ãƒˆãƒ¼ã‚¯ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
   - XSSæ”»æ’ƒã‹ã‚‰ã®é˜²å¾¡ã‚’å®Ÿç¾

2. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã®ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ã¯ä¸è¦**
   - localStorage/sessionStorageã¸ã®ä¿å­˜ã¯ä¸è¦
   - ãƒ–ãƒ©ã‚¦ã‚¶ãŒè‡ªå‹•çš„ã«Cookieã‚’é€ä¿¡
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã¨ã‚³ãƒ¼ãƒ‰é‡ã‚’åŒæ™‚ã«å‰Šæ¸›

3. **ãƒˆãƒ¼ã‚¯ãƒ³ã®è‡ªå‹•æ›´æ–°**
   - `ROTATE_REFRESH_TOKENS=True`ã«ã‚ˆã‚Šã€refresh tokenä½¿ç”¨æ™‚ã«æ–°ã—ã„refresh tokenãŒç™ºè¡Œã•ã‚Œã‚‹
   - å¤ã„refresh tokenã¯è‡ªå‹•çš„ã«ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆã«è¿½åŠ ã•ã‚Œã€å†åˆ©ç”¨ã§ããªããªã‚‹ï¼ˆãƒªãƒ—ãƒ¬ã‚¤æ”»æ’ƒå¯¾ç­–ï¼‰

4. **æœ¬ç•ªç’°å¢ƒã§ã®è¨­å®šå¤‰æ›´**
  - é–‹ç™ºç’°å¢ƒã‚’httpã§è¡Œã£ã¦ã„ãŸå ´åˆã€æœ¬ç•ªç’°å¢ƒã§è¨­å®šã®å¤‰æ›´ãŒå¿…è¦ã§ã™
   ```python
   # æœ¬ç•ªç’°å¢ƒã§ã¯ä»¥ä¸‹ã«å¤‰æ›´
   CSRF_COOKIE_SECURE = True
   CSRF_COOKIE_SAMESITE = 'None'
   JWT_AUTH_SECURE = True
   JWT_AUTH_SAMESITE = 'None'
   ```

---

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ã®ç°¡ç´ åŒ–

Cookieèªè¨¼ã¸ã®ç§»è¡Œã«ã‚ˆã‚Šã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã®ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ãŒå¤§å¹…ã«ç°¡ç´ åŒ–ã•ã‚Œã¾ã—ãŸï¼š

**ä¸è¦ã«ãªã£ãŸã‚³ãƒ¼ãƒ‰:**
- localStorage/sessionStorageã¸ã®ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜
- Authorization ãƒ˜ãƒƒãƒ€ãƒ¼ã®æ‰‹å‹•è¨­å®š
- ãƒˆãƒ¼ã‚¯ãƒ³æœŸé™ã®ç›£è¦–ã¨ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒ­ã‚¸ãƒƒã‚¯

**æ®‹ã£ãŸè²¬å‹™:**
- èªè¨¼ã‚¨ãƒ©ãƒ¼ï¼ˆ401ï¼‰ã®æœ€çµ‚çš„ãªãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã¸ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã•ã›ãªãŒã‚‰ã€ã‚³ãƒ¼ãƒ‰ã®ä¿å®ˆæ€§ã¨å¯èª­æ€§ã‚‚åŒæ™‚ã«å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚


#### âš¡ TanStack Query ã«ã‚ˆã‚‹èªè¨¼çŠ¶æ…‹ã®åŒæœŸ
èªè¨¼çŠ¶æ…‹ã®ç®¡ç†ã‚’å¾“æ¥ã®useEffectã‹ã‚‰TanStack Query (useQuery)ã¸ç§»è¡Œã—ã€Zustandã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ä»¥ä¸‹ã®èª²é¡Œã‚’è§£æ±ºã—ã¾ã—ãŸã€‚

**ç«¶åˆçŠ¶æ…‹ï¼ˆRace Conditionï¼‰ã®è§£æ¶ˆ**: ãƒ­ã‚°ã‚¤ãƒ³ç›´å¾Œã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã¨fetchMeã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’setQueryDataã«ã‚ˆã£ã¦æ˜ç¤ºçš„ã«åŒæœŸã€‚AuthGuardã«ãŠã„ã¦ã€Œèªè¨¼æ¸ˆã¿ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšä¸€ç¬ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€ã¨ã„ã†UXä¸Šã®ãƒãƒ©ã¤ãã‚’å®Œå…¨ã«è§£æ¶ˆã—ã¾ã—ãŸã€‚

**ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ä¸€è²«æ€§ã¨å³æ™‚æ€§**: queryClient.invalidateQueriesã¯éåŒæœŸã®å†å–å¾—ã‚’ä¼´ã†ãŸã‚ã€èªè¨¼çŠ¶æ…‹ã®åæ˜ ã«ãƒ©ã‚°ãŒç”Ÿã˜ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‹ã‚‰å¾—ã‚‰ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ç›´æ¥StoreãŠã‚ˆã³Queryã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«æ›¸ãè¾¼ã‚€ã“ã¨ã§ã€é€šä¿¡ã‚’å¾…ãŸãšã«å³åº§ã«ã‚¬ãƒ¼ãƒ‰ã‚’é€šéã•ã›ã‚‹è¨­è¨ˆã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

**ä¸è¦ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å‰Šæ¸›**: ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ï¼ˆèªè¨¼æƒ…å ±ï¼‰ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã«ä¼´ã†é‡è¤‡ã—ãŸ API å‘¼ã³å‡ºã—ã‚’æœ€å°é™ã«æŠ‘ãˆã¦ã„ã¾ã™ã€‚

## Todoç®¡ç†æ©Ÿèƒ½

### æ¦‚è¦

CRUDæ“ä½œã‚’å«ã‚€ã‚¿ã‚¹ã‚¯ç®¡ç†æ©Ÿèƒ½ã‚’å®Ÿè£…ã€‚å„ªå…ˆåº¦è¨­å®šã€é€²æ—ç®¡ç†ã€çµ±è¨ˆè¡¨ç¤ºãªã©ã€å®Ÿç”¨çš„ãªã‚¿ã‚¹ã‚¯ç®¡ç†ã«å¿…è¦ãªæ©Ÿèƒ½ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚

### ä¸»ãªæ©Ÿèƒ½

| æ©Ÿèƒ½ | èª¬æ˜ |
|---|---|
| **ã‚¿ã‚¹ã‚¯ä½œæˆ** | ã‚¿ã‚¤ãƒˆãƒ«ã€å„ªå…ˆåº¦ã€é€²æ—ã‚’è¨­å®šã—ã¦æ–°è¦ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ |
| **ã‚¿ã‚¹ã‚¯ä¸€è¦§** | å„ªå…ˆåº¦åˆ¥ã€é€²æ—åˆ¥ã«ã‚¿ã‚¹ã‚¯ã‚’è¡¨ç¤º |
| **ã‚¿ã‚¹ã‚¯ç·¨é›†** | ã‚¿ã‚¤ãƒˆãƒ«ã€å„ªå…ˆåº¦ã€é€²æ—ã‚’ãƒ¢ãƒ¼ãƒ€ãƒ«ã§ç·¨é›† |
| **ã‚¿ã‚¹ã‚¯å‰Šé™¤** | ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ä»˜ãã®å®‰å…¨ãªå‰Šé™¤ |
| **é€²æ—ç®¡ç†** | ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§0-100%ã®é€²æ—ã‚’è¨­å®šã€ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã§å³åº§ã«å®Œäº†åˆ‡æ›¿ |
| **çµ±è¨ˆè¡¨ç¤º** | å„ªå…ˆåº¦åˆ¥ã®ä»¶æ•°ã¨é€²æ—åˆ†å¸ƒã‚’ã‚°ãƒ©ãƒ•ã§å¯è¦–åŒ– |

### æŠ€è¡“çš„ç‰¹å¾´

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆDjangoï¼‰

**å®Ÿè£…æ§‹æˆ**:
```
backend/todos/
â”œâ”€â”€ models.py          # Todoãƒ¢ãƒ‡ãƒ«å®šç¾©
â”œâ”€â”€ serializers.py     # DRFã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¶
â”œâ”€â”€ views.py          # ViewSetï¼ˆCRUD APIï¼‰
â”œâ”€â”€ service.py        # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
â”œâ”€â”€ urls.py           # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â””â”€â”€ tests/            # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
```

**ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«**:
```python
class Todo(models.Model):
    user = ForeignKey(User)           # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ä»˜ã‘
    todo_title = CharField(max_length=255)  # ã‚¿ã‚¹ã‚¯å
    priority = CharField(choices=['HIGH', 'MEDIUM', 'LOW'])  # å„ªå…ˆåº¦
    progress = IntegerField(0-100)    # é€²æ—ç‡
    created_at = DateTimeField(auto_now_add=True)
    updated_at = DateTimeField(auto_now=True)
```

**APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | Method | èª¬æ˜ | èªè¨¼ |
|--------------|--------|-----|------|
| `/api/v1/todos/` | GET | ã‚¿ã‚¹ã‚¯ä¸€è¦§å–å¾— | å¿…é ˆ |
| `/api/v1/todos/` | POST | ã‚¿ã‚¹ã‚¯ä½œæˆ | å¿…é ˆ |
| `/api/v1/todos/{id}/` | GET | ã‚¿ã‚¹ã‚¯è©³ç´°å–å¾— | å¿…é ˆ |
| `/api/v1/todos/{id}/` | PATCH | ã‚¿ã‚¹ã‚¯æ›´æ–° | å¿…é ˆ |
| `/api/v1/todos/{id}/` | DELETE | ã‚¿ã‚¹ã‚¯å‰Šé™¤ | å¿…é ˆ |
| `/api/v1/todos/stats/` | GET | å„ªå…ˆåº¦åˆ¥çµ±è¨ˆ | å¿…é ˆ |
| `/api/v1/todos/progress-stats/` | GET | é€²æ—åˆ†å¸ƒçµ±è¨ˆ | å¿…é ˆ |

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆReact + TypeScriptï¼‰

**å®Ÿè£…æ§‹æˆ**:
```
frontend/src/features/todo/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ TodoList.tsx              # ã‚¿ã‚¹ã‚¯ä¸€è¦§è¡¨ç¤º
â”‚   â”œâ”€â”€ TodoItem.tsx              # å€‹åˆ¥ã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ TodoCreateForm.tsx        # ä½œæˆãƒ•ã‚©ãƒ¼ãƒ 
â”‚   â”œâ”€â”€ TodoEditModal.tsx         # ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«
â”‚   â”œâ”€â”€ TodoForm.tsx              # å…±é€šãƒ•ã‚©ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ TodoStatsChart.tsx        # å„ªå…ˆåº¦åˆ¥çµ±è¨ˆã‚°ãƒ©ãƒ•
â”‚   â””â”€â”€ TodoProgressChart.tsx     # é€²æ—åˆ†å¸ƒã‚°ãƒ©ãƒ•
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useTodos.ts               # CRUDæ“ä½œãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ useTodoStats.ts           # å„ªå…ˆåº¦çµ±è¨ˆãƒ•ãƒƒã‚¯
â”‚   â””â”€â”€ useProgressStats.ts       # é€²æ—çµ±è¨ˆãƒ•ãƒƒã‚¯
â”‚
â”œâ”€â”€ services/
â”‚   â””â”€â”€ todo-service.ts           # APIå‘¼ã³å‡ºã—ãƒ­ã‚¸ãƒƒã‚¯
â”‚
â””â”€â”€ types/
    â””â”€â”€ index.ts                  # å‹å®šç¾©
```

**çŠ¶æ…‹ç®¡ç†ã¨ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ**:

```typescript
// TanStack Query ã«ã‚ˆã‚‹æ¥½è¦³çš„æ›´æ–°
const { todos, createTodo, updateTodo, deleteTodo } = useTodos();

// æ¥½è¦³çš„æ›´æ–°ã®å®Ÿè£…ä¾‹
const createMutation = useApiMutation({
  mutationFn: todoService.createTodo,
  onMutate: async (newTodo) => {
    // 1. é€²è¡Œä¸­ã®ã‚¯ã‚¨ãƒªã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
    await queryClient.cancelQueries({ queryKey: ['todos'] });
    
    // 2. ç¾åœ¨ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä¿å­˜ï¼ˆãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼‰
    const previousTodos = queryClient.getQueryData(['todos']);
    
    // 3. æ¥½è¦³çš„æ›´æ–°: ä»®IDã§å³åº§ã«UIã«åæ˜ 
    queryClient.setQueryData(['todos'], (old) => [...old, optimisticTodo]);
    
    return { previousTodos };
  },
  onError: (err, variables, context) => {
    // 4. ã‚¨ãƒ©ãƒ¼æ™‚: ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
    queryClient.setQueryData(['todos'], context.previousTodos);
  },
  onSettled: () => {
    // 5. æœ€å¾Œã«: ã‚µãƒ¼ãƒãƒ¼ã¨åŒæœŸ
    queryClient.invalidateQueries({ queryKey: ['todos'] });
  },
});
```

**UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
- **shadcn/ui**: Button, Card, Dialog, Select, Slider, Alertç­‰
- **Radix UI**: ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **Recharts**: çµ±è¨ˆã‚°ãƒ©ãƒ•ã®æç”»

### æŠ€è¡“çš„ãªå®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ

#### æ¥½è¦³çš„æ›´æ–°ï¼ˆOptimistic Updateï¼‰

TanStack Queryã®æ©Ÿèƒ½ã‚’æ´»ç”¨ã—ã€ã‚µãƒ¼ãƒãƒ¼ã®å¿œç­”ã‚’å¾…ãŸãšã«UIã‚’å³åº§ã«æ›´æ–°ã—ã¾ã™ï¼š

```typescript
const createMutation = useApiMutation({
  mutationFn: todoService.createTodo,
  onMutate: async (newTodo) => {
    // 1. é€²è¡Œä¸­ã®ã‚¯ã‚¨ãƒªã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
    await queryClient.cancelQueries({ queryKey: ['todos'] });
    
    // 2. ç¾åœ¨ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä¿å­˜ï¼ˆãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼‰
    const previousTodos = queryClient.getQueryData(['todos']);
    
    // 3. æ¥½è¦³çš„æ›´æ–°: ä»®IDã§å³åº§ã«UIã«åæ˜ 
    queryClient.setQueryData(['todos'], (old) => [...old, optimisticTodo]);
    
    return { previousTodos };
  },
  onError: (err, variables, context) => {
    // ã‚¨ãƒ©ãƒ¼æ™‚: ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
    queryClient.setQueryData(['todos'], context.previousTodos);
  },
  onSettled: () => {
    // æœ€å¾Œã«: ã‚µãƒ¼ãƒãƒ¼ã¨åŒæœŸ
    queryClient.invalidateQueries({ queryKey: ['todos'] });
  },
});
```

**åŠ¹æœ**: ã‚¿ã‚¹ã‚¯ã®è¿½åŠ ãƒ»ç·¨é›†æ™‚ã«é€šä¿¡å¾…æ©ŸãŒãªãã€å³åº§ã«UIã«åæ˜ ã•ã‚Œã‚‹ãŸã‚UXãŒå‘ä¸Š

#### ãƒ‡ãƒ¼ã‚¿é›†è¨ˆã®åŠ¹ç‡åŒ–

Django ORMã®`aggregate`ã¨`annotate`ã‚’ä½¿ç”¨ã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å´ã§é›†è¨ˆã‚’å®Ÿè¡Œï¼š

```python
# é€²æ—ç‡ã®åˆ†å¸ƒã‚’20%åˆ»ã¿ã§é›†è¨ˆ
Todo.objects.filter(user=user).aggregate(
    range_0_20=Count(Case(When(progress__lte=20, then=1))),
    range_21_40=Count(Case(When(progress__gt=20, progress__lte=40, then=1))),
    # ...
)
```

**åŠ¹æœ**: Pythonå´ã§ãƒ«ãƒ¼ãƒ—å‡¦ç†ã›ãšã€DBã§ä¸€æ‹¬è¨ˆç®—ã™ã‚‹ã“ã¨ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€é©åŒ–

#### èªå¯ã®å¾¹åº•

Serviceå±¤ã§å¿…ãš`filter(user=user)`ã‚’é©ç”¨ã—ã€ä»–äººã®ãƒ‡ãƒ¼ã‚¿ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²æ­¢ï¼š

```python
@staticmethod
def get_user_todos(user):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®ã‚¿ã‚¹ã‚¯ã®ã¿ã‚’å–å¾—ï¼ˆèªå¯ã®æ‹…ä¿ï¼‰"""
    return Todo.objects.filter(user=user)
```

**åŠ¹æœ**: Viewå±¤ã«èªå¯ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›¸ã‹ãšã€Serviceå±¤ã§ä¸€å…ƒç®¡ç†ã™ã‚‹ã“ã¨ã§ä¿å®ˆæ€§å‘ä¸Š

---

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æˆ¦ç•¥

### æ¡ç”¨ï¼šNeon PostgreSQL

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã®ç§»æ¤æ€§ã¨é–‹ç™ºåŠ¹ç‡ã‚’é‡è¦–ã—ã€**Neon (PostgreSQL)** ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

**é¸å®šç†ç”±**:

| ç†ç”± | ãƒ¡ãƒªãƒƒãƒˆ |
|---|---|
| **ãƒ–ãƒ©ãƒ³ãƒæ©Ÿèƒ½** | é–‹ç™ºãƒ»ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ãƒ»ãƒ†ã‚¹ãƒˆç’°å¢ƒã”ã¨ã«DBã®è»½é‡ãªã‚³ãƒ”ãƒ¼ï¼ˆãƒ–ãƒ©ãƒ³ãƒï¼‰ã‚’ç„¡æ–™ã§ä½œæˆãƒ»ç ´æ£„å¯èƒ½ã€‚ãƒ†ã‚¹ãƒˆã®å†ç¾æ€§ã¨ç’°å¢ƒåˆ†é›¢ãŒå®¹æ˜“ |
| **ç§»æ¤æ€§** | æ¨™æº–PostgreSQLæº–æ‹ ã®ãŸã‚ã€å°†æ¥çš„ãªDBç§»è¡ŒãŒå®¹æ˜“ã€‚ãƒ™ãƒ³ãƒ€ãƒ¼ãƒ­ãƒƒã‚¯ã‚¤ãƒ³ã®ãƒªã‚¹ã‚¯ãŒä½ã„ |
| **ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·** | Renderã¨åŒã˜ãƒªãƒ¼ã‚¸ãƒ§ãƒ³é…ç½®ã§ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµŒç”±ã®é«˜é€Ÿé€šä¿¡ãŒå¯èƒ½ |

### ãƒ‡ãƒ—ãƒ­ã‚¤æ§‹æˆã¨é€Ÿåº¦æœ€é©åŒ–

**åŸå‰‡**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆRenderï¼‰ã¨DBï¼ˆNeonï¼‰ã¯**åŒã˜ãƒªãƒ¼ã‚¸ãƒ§ãƒ³**ã«é…ç½®ã™ã‚‹ã“ã¨

| é…ç½® | é€Ÿåº¦ | ç†ç”± |
|---|---|---|
| **åŒã˜ãƒªãƒ¼ã‚¸ãƒ§ãƒ³** | âš¡ æœ€é€Ÿï¼ˆæ¨å¥¨ï¼‰ | Renderã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµŒç”±ã§é€šä¿¡ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’çµŒç”±ã›ãšã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·æœ€å° |
| **ç•°ãªã‚‹ãƒªãƒ¼ã‚¸ãƒ§ãƒ³** | ğŸ¢ ä½é€Ÿ | ç‰©ç†çš„ãªè·é›¢ã¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ›ãƒƒãƒ—ãŒå¢—åŠ ã—ã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãŒé«˜ããªã‚‹ |

**æ¨å¥¨æ§‹æˆ**:

```
æœ¬ç•ªç’°å¢ƒ:
  Render (us-west) 
    â†•ï¸ ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼ˆä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼‰
  Neon (us-west)

é–‹ç™ºç’°å¢ƒ:
  Neon Branch: development
  Neon Branch: staging
  Neon Branch: feature/xxx (å¿…è¦ã«å¿œã˜ã¦ä½œæˆãƒ»å‰Šé™¤)
```

### ãƒ™ãƒ³ãƒ€ãƒ¼ãƒ­ãƒƒã‚¯ã‚¤ãƒ³å¯¾ç­–

**æ–¹é‡**: ã€Œä»˜åŠ ä¾¡å€¤æ©Ÿèƒ½ï¼ˆNeonã®ãƒ–ãƒ©ãƒ³ãƒç­‰ï¼‰ã¯æ´»ç”¨ã—ã¤ã¤ã€ãƒ‡ãƒ¼ã‚¿ã®ç§»æ¤æ€§ã¯é«˜ãä¿ã¤ã€

Renderã®æä¾›ã™ã‚‹å°‚ç”¨DBã‚µãƒ¼ãƒ“ã‚¹ã‚’é¿ã‘ãŸã®ã¯ã€ç§»æ¤æ€§ã®é«˜ã„PostgreSQLæ¨™æº–ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã§ã€å°†æ¥çš„ãªãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã®è‡ªç”±åº¦ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã§ã™ã€‚

**ãƒã‚¤ãƒ³ãƒˆ**:
- âœ… PostgreSQLæ¨™æº–æº–æ‹ ã«ã‚ˆã‚Šä»–ã®PostgreSQLã‚µãƒ¼ãƒ“ã‚¹ã¸ã®ç§»è¡ŒãŒå®¹æ˜“
- âœ… Neonã®ä»˜åŠ ä¾¡å€¤æ©Ÿèƒ½ï¼ˆãƒ–ãƒ©ãƒ³ãƒã€ã‚ªãƒ¼ãƒˆã‚¹ã‚±ãƒ¼ãƒ«ç­‰ï¼‰ã‚’æ´»ç”¨ã—ã¤ã¤ã€ãƒ‡ãƒ¼ã‚¿è‡ªä½“ã¯ãƒãƒ¼ã‚¿ãƒ–ãƒ«
- âœ… å°†æ¥çš„ãªã‚¤ãƒ³ãƒ•ãƒ©å¤‰æ›´ã®æŸ”è»Ÿæ€§ã‚’ç¢ºä¿
- âœ… ãƒ™ãƒ³ãƒ€ãƒ¼ä¾å­˜ã‚’æœ€å°é™ã«æŠ‘ãˆãŸã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ã“ã®æ§‹æˆã«ã‚ˆã‚Šã€é«˜é€Ÿãªãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã¨ç’°å¢ƒã®æŸ”è»Ÿæ€§ã‚’ä¸¡ç«‹ã§ãã¾ã™ã€‚


---

## HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæˆ¦ç•¥

### æ¡ç”¨ï¼šKy

**é¸å®šçµŒç·¯**:

å½“åˆã€ã‚«ã‚¹ã‚¿ãƒ `FetchClient`ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã—ãŸãŒã€ä»¥ä¸‹ã®ç†ç”±ã‹ã‚‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ¡ç”¨ã«æ–¹é‡è»¢æ›ï¼š

> **æ ¸å¿ƒçš„ãªæ°—ã¥ã**: ã€Œç›®çš„ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã§ã‚ã‚Šã€HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–‹ç™ºã§ã¯ãªã„ã€

**Kyæ¡ç”¨ã®ç†ç”±**:

| é …ç›® | Axios | **Kyï¼ˆæ¡ç”¨ï¼‰** |
|---|---|---|
| ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º | ~13KB | ~5KB â­ |
| APIè¨­è¨ˆ | XMLHttpRequesté¢¨ | Fetch APIé¢¨ â­ |
| ãƒªãƒˆãƒ©ã‚¤ | ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å¿…è¦ | æ¨™æº–æ©Ÿèƒ½ â­ |
| å­¦ç¿’ã‚³ã‚¹ãƒˆ | ä½ã„ | ä½ã„ï¼ˆFetch APIãƒ™ãƒ¼ã‚¹ï¼‰ â­ |

### å®Ÿè£…æ–¹é‡

Serviceå±¤ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã¸ã®å½±éŸ¿ã‚’æœ€å°åŒ–ã—ã¦ã„ã¾ã™ã€‚

---

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€**ãƒ†ã‚¹ãƒˆã®è²¬å‹™ã‚’æ˜ç¢ºã«åˆ†é›¢**ã—ã€ãƒ†ã‚¹ãƒˆãŒè‚¥å¤§åŒ–ãƒ»å½¢éª¸åŒ–ã—ãªã„æ§‹æˆã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

### ãƒ†ã‚¹ãƒˆè¨­è¨ˆã®åŸºæœ¬æ–¹é‡

```
        /\
       /  \  E2Eãƒ†ã‚¹ãƒˆ
      /----\  - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹ã®çµ±åˆãƒ†ã‚¹ãƒˆ
     /      \ - CI/CDã§ã®å“è³ªä¿è¨¼
    /--------\ 
   /          \ çµ±åˆãƒ†ã‚¹ãƒˆ
  /------------\ - æ©Ÿèƒ½å˜ä½ã®çµ±åˆæ¤œè¨¼
 /--------------\ - APIãƒ¢ãƒƒã‚¯ä½¿ç”¨
/________________\ 
    ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
    - å˜ä¸€è²¬å‹™ã®æ¤œè¨¼
    - é«˜é€Ÿå®Ÿè¡Œ
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆDjango TestCaseï¼‰

**ãƒ†ã‚¹ãƒˆå¯¾è±¡ã¨æ–¹é‡**:

| å±¤ | ãƒ†ã‚¹ãƒˆå¯¾è±¡ | ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ |
|---|---|---|
| **Serviceå±¤** | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ | ç´”ç²‹é–¢æ•°ã¨ã—ã¦ãƒ†ã‚¹ãƒˆï¼ˆORMã‚’ãƒ¢ãƒƒã‚¯ï¼‰ |
| **Viewå±¤** | APIç–é€šç¢ºèª | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨åŸºæœ¬çš„ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã¿ |
| **Modelå±¤** | ãƒ‡ãƒ¼ã‚¿åˆ¶ç´„ | å¿…è¦æœ€å°é™ï¼ˆDjangoã®æ©Ÿèƒ½ã‚’ä¿¡é ¼ï¼‰ |

**é…ç½®**: `backend/users/tests/`

---

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆReact + TypeScriptï¼‰

#### ãƒ†ã‚¹ãƒˆæ§‹æˆ

| ãƒ†ã‚¹ãƒˆãƒ¬ã‚¤ãƒ¤ãƒ¼ | ç›®çš„ | ãƒ„ãƒ¼ãƒ« | å¯¾è±¡ |
|--------------|------|-------|------|
| **Unit** | å˜ä¸€è²¬å‹™ã®æ¤œè¨¼ | Vitest + Testing Library | hooks / utils / å˜ç´”ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| **Integration** | æ©Ÿèƒ½å˜ä½ã®çµ±åˆæ¤œè¨¼ | Vitest + Testing Library + MSW | pages / features |
| **E2E** | ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹ã®çµ±åˆãƒ†ã‚¹ãƒˆ | Playwright + playwright-msw | é‡è¦ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼ |

**é…ç½®**:
- ãƒ¦ãƒ‹ãƒƒãƒˆ/çµ±åˆ: `tests/unit/`, `tests/integration/`
- E2E: `tests/e2e/`
- ãƒ¢ãƒƒã‚¯: `tests/mocks/`
- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—: `tests/setup/`

#### MSWã®ä½¿ç”¨

**Node.jsç’°å¢ƒï¼ˆVitestï¼‰**: `tests/mocks/server.ts`
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã¨çµ±åˆãƒ†ã‚¹ãƒˆã§ä½¿ç”¨
- `tests/setup/vitest.setup.ts` ã§è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

**ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒï¼ˆPlaywrightï¼‰**: `tests/test-utils/playwright-msw.ts`
- E2Eãƒ†ã‚¹ãƒˆã§playwright-mswã‚’ä½¿ç”¨
- ãƒ†ã‚¹ãƒˆã”ã¨ã«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ä¸Šæ›¸ãå¯èƒ½

#### E2Eãƒ†ã‚¹ãƒˆæˆ¦ç•¥

CI/CDã§E2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹æ™‚ç‚¹ã§ã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ï¼ˆ`dist/`ï¼‰ã ãŒã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã¯ã¾ã ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€**MSWã§APIã‚’ãƒ¢ãƒƒã‚¯**ã—ã¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«å…¨æ©Ÿèƒ½ã¨ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã‚’æ¤œè¨¼
- ã‚µãƒ¼ãƒãƒ¼è² è·ã‚’ç™ºç”Ÿã•ã›ãªã„
- é«˜é€Ÿã§å®‰å®šã—ãŸãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

#### èªè¨¼æ¸ˆã¿/æœªèªè¨¼ãƒ†ã‚¹ãƒˆã®åˆ†é›¢

Playwrightã§ã¯ã€èªè¨¼çŠ¶æ…‹ã‚’ä¿å­˜ãƒ»å†åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ†ã‚¹ãƒˆã®é«˜é€ŸåŒ–ã¨ä¿å®ˆæ€§ã‚’å‘ä¸Šï¼š

| ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | å¯¾è±¡ | èªè¨¼çŠ¶æ…‹ |
|------------|------|---------|
| `setup` | èªè¨¼ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— | - |
| `chromium` | æœªèªè¨¼ãƒ†ã‚¹ãƒˆ | ãªã— |
| `auth_chromium` | èªè¨¼æ¸ˆã¿ãƒ†ã‚¹ãƒˆ | `playwright-results/.auth/user.json` |

**ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**: `tests/setup/auth.setup.ts`
- ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã‚’ä¸€åº¦ã ã‘å®Ÿè¡Œ
- èªè¨¼çŠ¶æ…‹ã‚’ `.auth/user.json` ã«ä¿å­˜
- èªè¨¼æ¸ˆã¿ãƒ†ã‚¹ãƒˆã¯ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§é–‹å§‹

#### E2Eãƒ†ã‚¹ãƒˆã«ãŠã‘ã‚‹ãƒªãƒˆãƒ©ã‚¤åˆ¶å¾¡

E2Eãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã¯ã€React Queryã®ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ãŒç„¡é™ãƒ«ãƒ¼ãƒ—ã‚’å¼•ãèµ·ã“ã™å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€**windowã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã£ãŸç’°å¢ƒåˆ¤å®š**ã§ãƒªãƒˆãƒ©ã‚¤ã‚’åˆ¶å¾¡ã—ã¦ã„ã¾ã™ã€‚

**å®Ÿè£…æ–¹æ³•**:

1. **queryClient.ts ã§E2Eç’°å¢ƒã‚’æ¤œå‡º**
```typescript
// frontend/src/lib/queryClient.ts
const isE2ETest = typeof window !== 'undefined' && window.__IS_E2E_TESTING__;

export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      retry: isE2ETest ? false : 3,  // E2Eç’°å¢ƒã§ã¯ãƒªãƒˆãƒ©ã‚¤ç„¡åŠ¹
      refetchOnWindowFocus: false,
      staleTime: 5 * 60 * 1000,
    },
  },
});
```

2. **Playwright test-utils ã§ãƒ•ãƒ©ã‚°ã‚’è¨­å®š**
```typescript
// tests/test-utils/playwright-msw.ts
import { test as base, expect } from '@playwright/test';
import { createWorkerFixture } from 'playwright-msw';
import { handlers } from '@tests/mocks';

const test = base.extend({
  worker: createWorkerFixture(handlers),
  http,
});

// ã™ã¹ã¦ã®E2Eãƒ†ã‚¹ãƒˆã§è‡ªå‹•çš„ã«ãƒ•ãƒ©ã‚°ã‚’è¨­å®š
test.beforeEach(async ({ page }) => {
  await page.addInitScript(() => {
    (window as any).__IS_E2E_TESTING__ = true;
  });
});

export { expect, test };
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã«å¯¾ã—ã¦ã‚‚ãƒ†ã‚¹ãƒˆå¯èƒ½ï¼ˆ`import.meta.env.MODE`ã«ä¾å­˜ã—ãªã„ï¼‰
- âœ… ãƒªãƒˆãƒ©ã‚¤ã«ã‚ˆã‚‹ç„¡é™ãƒ«ãƒ¼ãƒ—ã‚’é˜²æ­¢ã—ã€ãƒ†ã‚¹ãƒˆãŒé«˜é€ŸåŒ–
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆãŒç¢ºå®Ÿã«å‹•ä½œ

---

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

```bash
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
docker compose exec backend python manage.py test

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®ã¿
docker compose exec backend python manage.py test users.tests.test_services

# ã‚«ãƒãƒ¬ãƒƒã‚¸
docker compose exec backend coverage run --source='.' manage.py test
docker compose exec backend coverage report
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```bash
# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆ
npm run test                # å®Ÿè¡Œ
npm run test:watch          # Watchãƒ¢ãƒ¼ãƒ‰
npm run test:coverage       # ã‚«ãƒãƒ¬ãƒƒã‚¸

# E2Eãƒ†ã‚¹ãƒˆ
npm run test:e2e            # å®Ÿè¡Œ
npm run test:e2e:ui         # UIãƒ¢ãƒ¼ãƒ‰

# ç‰¹å®šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã¿
npx playwright test --project=chromium        # æœªèªè¨¼
npx playwright test --project=auth_chromium   # èªè¨¼æ¸ˆã¿
```

---

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®ã¾ã¨ã‚

| ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ— | æœ¬æ•° | API | å®Ÿè¡Œç’°å¢ƒ | æ‰€è¦æ™‚é–“ | å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚° |
|------------|------|-----|---------|---------|--------------|
| **ãƒ¦ãƒ‹ãƒƒãƒˆ** | å¤šæ•° | - | Node.js (Vitest) | æ•°ç§’ | æ¯ã‚³ãƒŸãƒƒãƒˆ |
| **çµ±åˆ** | ä¸­ç¨‹åº¦ | MSW | Node.js (Vitest) | 30ç§’-1åˆ† | æ¯ã‚³ãƒŸãƒƒãƒˆ |
| **E2E** | å¤šæ•° | MSW | ãƒ–ãƒ©ã‚¦ã‚¶ (Playwright) | 5-10åˆ† | CIï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤å‰ï¼‰ |

**ãƒ†ã‚¹ãƒˆè¨­è¨ˆã®åŸå‰‡**:

1. **è²¬å‹™ã®æ˜ç¢ºåŒ–**: å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ãƒ†ã‚¹ãƒˆã™ã‚‹å†…å®¹ã‚’æ˜ç¢ºã«åˆ†é›¢
2. **é«˜é€Ÿãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã¯æ•°ç§’ã§å®Œäº†
3. **ç¾å®Ÿçš„ãªã‚«ãƒãƒ¬ãƒƒã‚¸**: 100%ã‚’ç›®æŒ‡ã•ãšã€é‡è¦ãªéƒ¨åˆ†ã«é›†ä¸­
4. **ä¿å®ˆæ€§ã®ç¢ºä¿**: ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚‚æœ¬ç•ªã‚³ãƒ¼ãƒ‰ã¨åŒã˜å“è³ªåŸºæº–
5. **CI/CDã¨ã®çµ±åˆ**: ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«é©åˆ‡ãªãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ

ã“ã®æˆ¦ç•¥ã«ã‚ˆã‚Šã€é–‹ç™ºé€Ÿåº¦ã¨ã‚³ãƒ¼ãƒ‰å“è³ªã®ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¡ãªãŒã‚‰ã€é•·æœŸçš„ãªä¿å®ˆæ€§ã‚’ç¢ºä¿ã—ã¦ã„ã¾ã™ã€‚

---

## ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆï¼ˆTerraformï¼‰

### æ¦‚è¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¤ãƒ³ãƒ•ãƒ©ã¯ **Terraform** ã§ç®¡ç†ã•ã‚Œã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’è‡ªå‹•æ§‹ç¯‰ã—ã¾ã™ã€‚
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Infrastructure                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚    Neon      â”‚  â”‚  Backblaze   â”‚  â”‚  Cloudflare  â”‚    â”‚
â”‚  â”‚  PostgreSQL  â”‚  â”‚   B2 Storage â”‚  â”‚    Pages     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                  â”‚                               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                  â”‚                                         â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚         â”‚     Render      â”‚                                â”‚
â”‚         â”‚  Django Backend â”‚                                â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
terraform/
â”œâ”€â”€ modules/              # å†åˆ©ç”¨å¯èƒ½ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ neon/            # Neon PostgreSQL
â”‚   â”œâ”€â”€ backblaze/       # Backblaze B2
â”‚   â”œâ”€â”€ cloudflare/      # Cloudflare Pages
â”‚   â””â”€â”€ render/          # Render Web Service
â””â”€â”€ envs/                # ç’°å¢ƒã”ã¨ã®æ§‹æˆ
    â”œâ”€â”€ production/      # æœ¬ç•ªç’°å¢ƒ
    â”‚   â”œâ”€â”€ provider.tf
    â”‚   â”œâ”€â”€ variables.tf
    â”‚   â”œâ”€â”€ locals.tf
    â”‚   â”œâ”€â”€ main.tf
    â”‚   â””â”€â”€ outputs.tf
    â””â”€â”€ staging/         # ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ
        â””â”€â”€ ...
```

### ã‚¤ãƒ³ãƒ•ãƒ©ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” | ãƒªã‚½ãƒ¼ã‚¹ |
|---------|------|---------|
| **Neon** | PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ãƒ–ãƒ©ãƒ³ãƒã€DBã€ãƒ­ãƒ¼ãƒ« |
| **Backblaze B2** | é™çš„ã‚¢ã‚»ãƒƒãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | ãƒã‚±ãƒƒãƒˆã€Application Key |
| **Cloudflare Pages** | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° | Pagesãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |
| **Render** | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° | Web Serviceï¼ˆDockerï¼‰ |

### Terraform Cloudè¨­å®š

#### å¿…è¦ãªç’°å¢ƒå¤‰æ•°
```
Environment Variablesï¼ˆTerraform Cloudï¼‰:
  RENDER_API_KEY           # Render APIã‚­ãƒ¼
  NEON_API_KEY             # Neon APIã‚­ãƒ¼
  CLOUDFLARE_API_TOKEN     # Cloudflare APIãƒˆãƒ¼ã‚¯ãƒ³
  B2_APPLICATION_KEY_ID    # Backblaze Key ID
  B2_APPLICATION_KEY       # Backblaze Key Secret
```

#### Terraform Variables
```
Terraform Variables:
  render_owner_id          # Render Owner IDï¼ˆusr-xxxï¼‰
  cloudflare_account_id    # Cloudflare Account ID
  github_repo_url          # GitHub ãƒªãƒã‚¸ãƒˆãƒªURL
```

### åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

#### 1. å‰ææ¡ä»¶

- Terraform Cloud ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- å„ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
  - [Neon](https://neon.tech/)
  - [Backblaze](https://www.backblaze.com/b2/)
  - [Cloudflare](https://www.cloudflare.com/)
  - [Render](https://render.com/)

#### 2. Terraform Cloudã®æº–å‚™
```bash
# Terraform Cloudã«ãƒ­ã‚°ã‚¤ãƒ³
terraform login

# Organizationä½œæˆï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§ï¼‰
# Organizationå: django-react-app

# Workspacesä½œæˆ
# - django-react-production
# - django-react-staging
```

#### 3. APIã‚­ãƒ¼ã®å–å¾—

**Render**:
```
Dashboard â†’ Account Settings â†’ API Keys â†’ Create API Key
â†’ RENDER_API_KEY
```

**Neon**:
```
Dashboard â†’ Account â†’ API keys â†’ Generate new API key
â†’ NEON_API_KEY
```

**Cloudflare**:
```
Dashboard â†’ My Profile â†’ API Tokens â†’ Create Token
â†’ Edit Cloudflare Workers â†’ CLOUDFLARE_API_TOKEN
```

**Backblaze**:
```
Dashboard â†’ App Keys â†’ Add a New Application Key
â†’ B2_APPLICATION_KEY_ID / B2_APPLICATION_KEY
```

#### 4. GitHubé€£æº

**Cloudflare Pages**:
```
1. Cloudflare Dashboard â†’ Workers & Pages
2. Create application â†’ Pages â†’ Connect to Git
3. GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’é€£æº
4. ãƒªãƒã‚¸ãƒˆãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯
```

**Render**:
```
1. Render Dashboard â†’ Settings â†’ GitHub Apps
2. GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’é€£æº
3. ãƒªãƒã‚¸ãƒˆãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯
```

#### 5. Terraformå®Ÿè¡Œ
```bash
# åˆæœŸåŒ–
cd terraform/envs/production
terraform init

# æ§‹æˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
terraform plan

# ã‚¤ãƒ³ãƒ•ãƒ©ä½œæˆ
terraform apply

# ç¢ºèª
terraform output
```

### ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®ç¢ºèª
```bash
# å‡ºåŠ›å€¤ã‚’ç¢ºèª
terraform output deployment_info

# å‡ºåŠ›ä¾‹:
# deployment_info = {
#   database = {
#     provider = "Neon"
#     host     = "ep-xxx.aws-ap-southeast-1.aws.neon.tech"
#   }
#   backend = {
#     provider = "Render"
#     url      = "https://django-react-app-backend-production.onrender.com"
#   }
#   frontend = {
#     provider = "Cloudflare Pages"
#     url      = "https://django-react-app-frontend-production.pages.dev"
#   }
#   storage = {
#     provider = "Backblaze B2"
#     bucket   = "django-react-app-assets-production"
#   }
# }
```

### ãƒªã‚½ãƒ¼ã‚¹å‘½åè¦å‰‡
```
å½¢å¼: {project_name}-{component}-{environment}

ä¾‹:
  - django-react-app-db-production
  - django-react-app-assets-production
  - django-react-app-frontend-production
  - django-react-app-backend-production
```

### ã‚¤ãƒ³ãƒ•ãƒ©æ›´æ–°
```bash
# å¤‰æ›´ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
terraform plan

# å¤‰æ›´ã‚’é©ç”¨
terraform apply

# ç‰¹å®šã®ãƒªã‚½ãƒ¼ã‚¹ã®ã¿æ›´æ–°
terraform apply -target=module.render

# ã‚¤ãƒ³ãƒ•ãƒ©å‰Šé™¤ï¼ˆæ³¨æ„ï¼‰
terraform destroy
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ã‚¨ãƒ©ãƒ¼: èªè¨¼å¤±æ•—
```
è§£æ±ºç­–:
  1. Terraform Cloud Variables ã‚’ç¢ºèª
  2. APIã‚­ãƒ¼ãŒæœ‰åŠ¹ã‹ç¢ºèª
  3. æ¨©é™ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
```

#### ã‚¨ãƒ©ãƒ¼: GitHubé€£æº
```
è§£æ±ºç­–:
  1. Cloudflare/Render Dashboard ã§æ‰‹å‹•é€£æºã‚’å®Œäº†
  2. ãƒªãƒã‚¸ãƒˆãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’ç¢ºèª
```

#### ã‚¨ãƒ©ãƒ¼: ãƒªã‚½ãƒ¼ã‚¹ä½œæˆå¤±æ•—
```
è§£æ±ºç­–:
  1. terraform state list ã§ãƒªã‚½ãƒ¼ã‚¹ä¸€è¦§ã‚’ç¢ºèª
  2. æ‰‹å‹•ã§ä½œæˆã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ãŒã‚ã‚Œã°å‰Šé™¤
  3. terraform apply ã‚’å†å®Ÿè¡Œ
```

---

## ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

```bash
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
docker compose exec backend python manage.py makemigrations
docker compose exec backend python manage.py migrate

# ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æŠ•å…¥
docker compose exec backend python manage.py seed_db

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
docker compose exec backend python manage.py test
docker compose exec backend python manage.py test users.tests.test_services

# ã‚«ãƒãƒ¬ãƒƒã‚¸
docker compose exec backend coverage run --source='.' manage.py test
docker compose exec backend coverage report

# ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
docker compose exec backend python manage.py createsuperuser

# Djangoã‚·ã‚§ãƒ«
docker compose exec backend python manage.py shell
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# ãƒ“ãƒ«ãƒ‰
npm run build
npm run preview  # ãƒ“ãƒ«ãƒ‰çµæœã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

# ãƒ†ã‚¹ãƒˆ
npm run test              # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆ
npm run test:watch        # Watchãƒ¢ãƒ¼ãƒ‰
npm run test:coverage     # ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ã
npm run test:e2e          # E2Eãƒ†ã‚¹ãƒˆ
npm run test:e2e:ui       # E2E UIãƒ¢ãƒ¼ãƒ‰

# ãƒªãƒ³ã‚¿ãƒ¼ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼
npm run lint
npm run format

# å‹ãƒã‚§ãƒƒã‚¯
npm run type-check
```

### Docker

```bash
# ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•
docker compose up -d

# ãƒ­ã‚°ç¢ºèª
docker compose logs -f backend
docker compose logs -f frontend

# ã‚³ãƒ³ãƒ†ãƒŠå†èµ·å‹•
docker compose restart backend
docker compose restart frontend

# ã‚³ãƒ³ãƒ†ãƒŠåœæ­¢
docker compose down

# ãƒœãƒªãƒ¥ãƒ¼ãƒ å‰Šé™¤ï¼ˆDBåˆæœŸåŒ–ï¼‰
docker compose down -v
```

---

## ãƒ‡ãƒ—ãƒ­ã‚¤

### ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ã‚µãƒ¼ãƒ“ã‚¹ | é¸å®šç†ç”± |
|---|---|---|
| **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰** | Render | Gité€£æºã«ã‚ˆã‚‹è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã€ç’°å¢ƒå¤‰æ•°ç®¡ç†ãŒå®¹æ˜“ |
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | Cloudflare Pages | ã‚¨ãƒƒã‚¸é…ä¿¡ã«ã‚ˆã‚‹é«˜é€ŸåŒ–ã€ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ååˆ†ãªæ€§èƒ½ |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** | Neon (PostgreSQL) | ãƒ–ãƒ©ãƒ³ãƒæ©Ÿèƒ½ã€ç§»æ¤æ€§ã®é«˜ã•ã€ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· |

---
